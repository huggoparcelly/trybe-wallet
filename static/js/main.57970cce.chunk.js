(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{30:function(e,t,a){e.exports=a(41)},35:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=a(19),i=(a(35),a(12)),u=a(10),s=a(11),d=a(14),m=a(13),h=a(2),p=a(7);function E(e){return function(t){t({type:"REQUEST_API"}),fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(a){t(function(e,t){return{type:"ADD_EXPENSE",payload:Object(p.a)(Object(p.a)({},e),{},{exchangeRates:t})}}(e,a))}))}}function v(){return function(e){return e({type:"REQUEST_API"}),fetch("https://economia.awesomeapi.com.br/json/all").then((function(t){return t.json().then((function(t){return e({type:"GET_COIN",payload:{currencies:t}})}))}))}}var g=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(u.a)(this,a);return(n=t.call(this,e)).state={email:"",password:"",passwordLength:6},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,c=t.passwordLength,o=this.props,i=o.emailValue,u=o.getCoins,s=n.length<c||!a.match(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/);return r.a.createElement("form",null,r.a.createElement("input",{type:"email",placeholder:"Email",value:a,"data-testid":"email-input",onChange:function(t){return e.setState({email:t.target.value})}}),r.a.createElement("input",{type:"password",placeholder:"Senha",value:n,"data-testid":"password-input",onChange:function(t){return e.setState({password:t.target.value})}}),r.a.createElement(l.b,{to:"/carteira"},r.a.createElement("button",{type:"submit",disabled:s,onClick:function(){i({email:a}),u()}},"Entrar")))}}]),a}(r.a.Component),f=Object(i.b)(null,(function(e){return{emailValue:function(t){return e(function(e){return{type:"USER_ENTER",email:e}}(t))},getCoins:function(){return e(v())}}}))(g),b=a(18),y=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getCoins)()}},{key:"getHeader",value:function(e){var t=this.props.getExpenses,a=0;return t.forEach((function(e){a+=e.value*e.exchangeRates[e.currency].ask})),r.a.createElement("header",null,r.a.createElement("span",{"data-testid":"email-field"},"Email: ".concat(e)),r.a.createElement("p",{"data-testid":"total-field"},"Total: ".concat(Number(a).toFixed(2))),r.a.createElement("p",{"data-testid":"header-currency-field"},"BRL"))}},{key:"getValue",value:function(){var e=this,t=this.state.value;return r.a.createElement("label",{htmlFor:"expenses"},"Valor:",r.a.createElement("input",{type:"number",id:"expenses",name:"value",value:t,onChange:function(t){return e.handleChange(t)}}))}},{key:"getDescription",value:function(){var e=this,t=this.state.description;return r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"text",id:"description",name:"description",value:t,onChange:function(t){return e.handleChange(t)}}))}},{key:"getCoins",value:function(){var e=this,t=this.state.currency,a=this.props.coins,n=Object.keys(a).filter((function(e){return"USDT"!==e}));return r.a.createElement("label",{htmlFor:"coin"},"Moeda:",r.a.createElement("select",{id:"coin",name:"currency",value:t,onChange:function(t){return e.handleChange(t)}},n.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))}},{key:"getPayment",value:function(){var e=this,t=this.state.method;return r.a.createElement("label",{htmlFor:"payment"},"M\xe9todo de pagamento:",r.a.createElement("select",{id:"payment",name:"method",value:t,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito")))}},{key:"getTag",value:function(){var e=this,t=this.state.tag;return r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{id:"tag",name:"tag",value:t,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade")))}},{key:"getBtn",value:function(){var e=this,t=this.state,a=t.id,n=t.value,c=t.description,o=t.currency,l=t.method,i=t.tag,u=this.props.addExpense;return r.a.createElement("button",{type:"button",onClick:function(){u({id:a,value:n,description:c,currency:o,method:l,tag:i}),e.countId()}},"Adicionar despesa")}},{key:"getTable",value:function(){var e=this.props.getExpenses;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{key:e.description},e.description),r.a.createElement("td",{key:e.tag},e.tag),r.a.createElement("td",{key:e.method},e.method),r.a.createElement("td",{key:e.value},e.value),r.a.createElement("td",{key:e.currency},e.exchangeRates[e.currency].name.split("/")[0]),r.a.createElement("td",{key:"Price"},Number(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",{key:"converted value"},Number(e.value*e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",{key:"BRL"},"Real"))}))))}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(b.a)({},n,a))}},{key:"countId",value:function(){this.setState((function(e){return{id:e.id+1}}))}},{key:"render",value:function(){var e=this.props.email;return r.a.createElement(r.a.Fragment,null,this.getHeader(e),r.a.createElement("form",null,this.getValue(),this.getDescription(),this.getCoins(),this.getPayment(),this.getTag(),this.getBtn()),this.getTable())}}]),a}(r.a.Component),j=Object(i.b)((function(e){return{email:e.user.email,coins:e.wallet.currencies,getExpenses:e.wallet.expenses}}),(function(e){return{addExpense:function(t){return e(E(t))},getCoins:function(){return e(v())}}}))(y),k=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,{exact:!0,path:"/",component:f}),r.a.createElement(h.a,{path:"/carteira",component:j}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=a(8),C=a(27),w=a(28),x={};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ENTER":return t.email;default:return e}},S=a(29),R={currencies:[],expenses:[],count:0,isLoadind:!1};var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_API":return Object(p.a)(Object(p.a)({},e),{},{isLoadind:!0});case"GET_COIN":return Object(p.a)(Object(p.a)({},e),{},{currencies:t.payload.currencies,isLoadind:!1});case"ADD_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{expenses:[].concat(Object(S.a)(e.expenses),[t.payload]),isLoadind:!1});case"COUNT_EXPENSE":return Object(p.a)({},e);default:return e}},_=Object(O.combineReducers)({user:T,wallet:D}),N=Object(O.createStore)(_,Object(C.composeWithDevTools)(Object(O.applyMiddleware)(w.a)));o.a.render(r.a.createElement(l.a,{basename:"/trybe-wallet"},r.a.createElement(i.a,{store:N},r.a.createElement(k,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.57970cce.chunk.js.map